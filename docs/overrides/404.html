{% extends "main.html" %}
{% block htmltitle %}
  <title>404 - Not found</title>
{% endblock %}

{% block content %}
  <style>
    /* Hide everything initially */
    body { visibility: hidden; }
  </style>

  <script>
    // Hide content immediately
    document.body.style.visibility = 'hidden';

    fetch('/auth/check', {
      method: 'GET',
      credentials: 'same-origin'
    })
    .then(response => {
      if (!response.ok) {
        window.location.replace('/auth/login');
      } else {
        // Only show content if authenticated
        document.body.style.visibility = 'visible';
      }
    });
  </script>
  <h1>404 - Not found</h1>
{% endblock %}
